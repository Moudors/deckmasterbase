{"ast":null,"code":"import _objectSpread from\"C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import{Input}from\"../ui/input\";import{Button}from\"../ui/button\";import{Search,Loader2}from\"lucide-react\";import{motion,AnimatePresence}from\"framer-motion\";import{useQueryClient}from\"@tanstack/react-query\";import{deckCardOperations}from\"../../lib/supabaseOperations\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SearchBar(_ref){let{deckId,isSearching,setIsSearching}=_ref;const[query,setQuery]=useState(\"\");const[suggestions,setSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const[isLoadingSuggestions,setIsLoadingSuggestions]=useState(false);const[selectedIndex,setSelectedIndex]=useState(-1);const searchRef=useRef(null);const inputRef=useRef(null);const queryClient=useQueryClient();useEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setShowSuggestions(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);useEffect(()=>{const fetchSuggestions=async()=>{if(query.trim().length<2){setSuggestions([]);setShowSuggestions(false);return;}setIsLoadingSuggestions(true);try{const response=await fetch(\"https://api.scryfall.com/cards/autocomplete?q=\".concat(encodeURIComponent(query)));const data=await response.json();setSuggestions(data.data||[]);setShowSuggestions(true);setSelectedIndex(-1);}catch(error){console.error(\"Erro ao buscar sugestÃµes:\",error);setSuggestions([]);}finally{setIsLoadingSuggestions(false);}};const debounceTimer=setTimeout(fetchSuggestions,300);return()=>clearTimeout(debounceTimer);},[query]);// ðŸ”„ Adicionar carta ao deck\nconst handleSearch=async cardName=>{if(!deckId)return;setIsSearching(true);try{var _cardData$image_uris,_cardData$card_faces,_cardData$card_faces$,_cardData$card_faces$2;// Buscar dados completos da carta no Scryfall\nconst response=await fetch(\"https://api.scryfall.com/cards/named?exact=\".concat(encodeURIComponent(cardName)));const cardData=await response.json();const imageUrl=((_cardData$image_uris=cardData.image_uris)===null||_cardData$image_uris===void 0?void 0:_cardData$image_uris.normal)||((_cardData$card_faces=cardData.card_faces)===null||_cardData$card_faces===void 0?void 0:(_cardData$card_faces$=_cardData$card_faces[0])===null||_cardData$card_faces$===void 0?void 0:(_cardData$card_faces$2=_cardData$card_faces$.image_uris)===null||_cardData$card_faces$2===void 0?void 0:_cardData$card_faces$2.normal);const newCard={deck_id:deckId,card_name:cardData.name,scryfall_id:cardData.id,image_url:imageUrl,mana_cost:cardData.mana_cost||\"\",type_line:cardData.type_line||\"\",acquired:false,quantity:1,created_at:new Date(),// Adicionar card_faces para suportar dupla face\ncard_faces:cardData.card_faces||null};// Check if this card already exists in the deck (by scryfall_id)\nconst currentCards=queryClient.getQueryData([\"cards\",deckId])||[];const existing=currentCards.find(c=>c.scryfall_id===cardData.id);if(existing){// Increment quantity on existing doc\nconst nextQty=(existing.quantity||1)+1;// Optimistic cache update\nqueryClient.setQueryData([\"cards\",deckId],function(){let old=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return old.map(c=>c.id===existing.id?_objectSpread(_objectSpread({},c),{},{quantity:nextQty}):c);});try{// Atualizar quantidade no Supabase\nawait deckCardOperations.updateDeckCard(existing.id,{quantity:nextQty});// Sucesso silencioso - cache jÃ¡ estÃ¡ correto\n}catch(err){// Rollback para erros crÃ­ticos\nconsole.error(\"Erro ao incrementar:\",err);queryClient.setQueryData([\"cards\",deckId],function(){let old=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return old.map(c=>c.id===existing.id?_objectSpread(_objectSpread({},c),{},{quantity:existing.quantity}):c);});}}else{// --- show optimistic card immediately (client-side Scryfall fetched data)\nconst tempId=\"tmp-\".concat(Date.now());const tempCard=_objectSpread(_objectSpread({id:tempId},newCard),{},{__optimistic:true});queryClient.setQueryData([\"cards\",deckId],function(){let old=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return[tempCard,...old];});// Persist to Supabase\ntry{const docId=await deckCardOperations.addCardToDeck(deckId,newCard);// Replace temp with real card id & data\nqueryClient.setQueryData([\"cards\",deckId],function(){let old=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return old.map(c=>c&&c.id===tempId?_objectSpread({id:docId},newCard):c);});// Sucesso - carta adicionada\n}catch(err){// Rollback para erros\nconsole.error(\"Erro ao adicionar:\",err);queryClient.setQueryData([\"cards\",deckId],function(){let old=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return old.filter(c=>c.id!==tempId);});alert(\"Erro ao adicionar carta: \"+(err.message||\"Tente novamente\"));}}// Resetar estado e focar input para permitir adicionar mais\nsetQuery(\"\");setSuggestions([]);setShowSuggestions(false);try{var _inputRef$current;(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();}catch(e){/* ignore */}// Resetar estado e focar input para permitir adicionar mais\nsetQuery(\"\");setSuggestions([]);setShowSuggestions(false);try{var _inputRef$current2;(_inputRef$current2=inputRef.current)===null||_inputRef$current2===void 0?void 0:_inputRef$current2.focus();}catch(e){/* ignore */}}catch(error){console.error(\"Erro ao adicionar carta:\",error);}finally{setIsSearching(false);}};const handleSubmit=e=>{e.preventDefault();if(selectedIndex>=0&&suggestions[selectedIndex]){handleSearch(suggestions[selectedIndex]);}else if(query.trim()){handleSearch(query.trim());}};const handleKeyDown=e=>{if(!showSuggestions||suggestions.length===0)return;if(e.key===\"ArrowDown\"){e.preventDefault();setSelectedIndex(prev=>prev<suggestions.length-1?prev+1:prev);}else if(e.key===\"ArrowUp\"){e.preventDefault();setSelectedIndex(prev=>prev>0?prev-1:-1);}else if(e.key===\"Escape\"){setShowSuggestions(false);setSelectedIndex(-1);}};const handleSuggestionClick=suggestion=>{handleSearch(suggestion);};return/*#__PURE__*/_jsx(motion.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:\"sticky top-0 z-20 bg-gray-900 border-b border-gray-800 p-4\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"flex gap-2 relative\",ref:searchRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 z-10\"}),/*#__PURE__*/_jsx(Input,{id:\"searchCard\",name:\"searchCard\",value:query,onChange:e=>setQuery(e.target.value),ref:inputRef,onKeyDown:handleKeyDown,onFocus:()=>{if(suggestions.length>0){setShowSuggestions(true);}},placeholder:\"Buscar carta no Scryfall...\",className:\"pl-10 bg-gray-800 border-gray-700 text-white placeholder:text-gray-500 focus:border-orange-500\",autoComplete:\"off\"}),/*#__PURE__*/_jsx(AnimatePresence,{children:showSuggestions&&suggestions.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:\"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl max-h-80 overflow-y-auto z-50\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(motion.div,{onClick:()=>handleSuggestionClick(suggestion),className:\"px-4 py-3 cursor-pointer transition-colors border-b border-gray-700 last:border-b-0 \".concat(index===selectedIndex?\"bg-orange-500/20 text-orange-400\":\"text-gray-300 hover:bg-gray-700\"),whileHover:{x:4},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:suggestion})]})},index))})}),isLoadingSuggestions&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-3 top-1/2 -translate-y-1/2\",children:/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin text-gray-400\"})})]})})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Input","Button","Search","Loader2","motion","AnimatePresence","useQueryClient","deckCardOperations","jsx","_jsx","jsxs","_jsxs","SearchBar","_ref","deckId","isSearching","setIsSearching","query","setQuery","suggestions","setSuggestions","showSuggestions","setShowSuggestions","isLoadingSuggestions","setIsLoadingSuggestions","selectedIndex","setSelectedIndex","searchRef","inputRef","queryClient","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","fetchSuggestions","trim","length","response","fetch","concat","encodeURIComponent","data","json","error","console","debounceTimer","setTimeout","clearTimeout","handleSearch","cardName","_cardData$image_uris","_cardData$card_faces","_cardData$card_faces$","_cardData$card_faces$2","cardData","imageUrl","image_uris","normal","card_faces","newCard","deck_id","card_name","name","scryfall_id","id","image_url","mana_cost","type_line","acquired","quantity","created_at","Date","currentCards","getQueryData","existing","find","c","nextQty","setQueryData","old","arguments","undefined","map","_objectSpread","updateDeckCard","err","tempId","now","tempCard","__optimistic","docId","addCardToDeck","filter","alert","message","_inputRef$current","focus","e","_inputRef$current2","handleSubmit","preventDefault","handleKeyDown","key","prev","handleSuggestionClick","suggestion","div","initial","y","opacity","animate","className","children","onSubmit","ref","value","onChange","onKeyDown","onFocus","placeholder","autoComplete","exit","index","onClick","whileHover","x"],"sources":["C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/src/components/deck/SearchBar.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Input } from \"../ui/input\";\r\nimport { Button } from \"../ui/button\";\r\nimport { Search, Loader2 } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { deckCardOperations } from \"../../lib/supabaseOperations\";\r\n\r\nexport default function SearchBar({ deckId, isSearching, setIsSearching }) {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [isLoadingSuggestions, setIsLoadingSuggestions] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(-1);\r\n  const searchRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n  const queryClient = useQueryClient();\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setShowSuggestions(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchSuggestions = async () => {\r\n      if (query.trim().length < 2) {\r\n        setSuggestions([]);\r\n        setShowSuggestions(false);\r\n        return;\r\n      }\r\n\r\n      setIsLoadingSuggestions(true);\r\n      try {\r\n        const response = await fetch(\r\n          `https://api.scryfall.com/cards/autocomplete?q=${encodeURIComponent(query)}`\r\n        );\r\n        const data = await response.json();\r\n        setSuggestions(data.data || []);\r\n        setShowSuggestions(true);\r\n        setSelectedIndex(-1);\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar sugestÃµes:\", error);\r\n        setSuggestions([]);\r\n      } finally {\r\n        setIsLoadingSuggestions(false);\r\n      }\r\n    };\r\n\r\n    const debounceTimer = setTimeout(fetchSuggestions, 300);\r\n    return () => clearTimeout(debounceTimer);\r\n  }, [query]);\r\n\r\n  // ðŸ”„ Adicionar carta ao deck\r\n  const handleSearch = async (cardName) => {\r\n    if (!deckId) return;\r\n    setIsSearching(true);\r\n\r\n    try {\r\n      // Buscar dados completos da carta no Scryfall\r\n      const response = await fetch(\r\n        `https://api.scryfall.com/cards/named?exact=${encodeURIComponent(cardName)}`\r\n      );\r\n      const cardData = await response.json();\r\n\r\n      const imageUrl =\r\n        cardData.image_uris?.normal || cardData.card_faces?.[0]?.image_uris?.normal;\r\n\r\n      const newCard = {\r\n        deck_id: deckId,\r\n        card_name: cardData.name,\r\n        scryfall_id: cardData.id,\r\n        image_url: imageUrl,\r\n        mana_cost: cardData.mana_cost || \"\",\r\n        type_line: cardData.type_line || \"\",\r\n        acquired: false,\r\n        quantity: 1,\r\n        created_at: new Date(),\r\n        // Adicionar card_faces para suportar dupla face\r\n        card_faces: cardData.card_faces || null,\r\n      };\r\n\r\n      // Check if this card already exists in the deck (by scryfall_id)\r\n      const currentCards = queryClient.getQueryData([\"cards\", deckId]) || [];\r\n      const existing = currentCards.find((c) => c.scryfall_id === cardData.id);\r\n\r\n      if (existing) {\r\n        // Increment quantity on existing doc\r\n        const nextQty = (existing.quantity || 1) + 1;\r\n        // Optimistic cache update\r\n        queryClient.setQueryData([\"cards\", deckId], (old = []) =>\r\n          old.map((c) => (c.id === existing.id ? { ...c, quantity: nextQty } : c))\r\n        );\r\n\r\n        try {\r\n          // Atualizar quantidade no Supabase\r\n          await deckCardOperations.updateDeckCard(existing.id, { quantity: nextQty });\r\n          // Sucesso silencioso - cache jÃ¡ estÃ¡ correto\r\n        } catch (err) {\r\n          // Rollback para erros crÃ­ticos\r\n          console.error(\"Erro ao incrementar:\", err);\r\n          queryClient.setQueryData([\"cards\", deckId], (old = []) =>\r\n            old.map((c) => (c.id === existing.id ? { ...c, quantity: existing.quantity } : c))\r\n          );\r\n        }\r\n      } else {\r\n        // --- show optimistic card immediately (client-side Scryfall fetched data)\r\n        const tempId = `tmp-${Date.now()}`;\r\n        const tempCard = { id: tempId, ...newCard, __optimistic: true };\r\n        queryClient.setQueryData([\"cards\", deckId], (old = []) => [tempCard, ...old]);\r\n\r\n        // Persist to Supabase\r\n        try {\r\n          const docId = await deckCardOperations.addCardToDeck(deckId, newCard);\r\n\r\n          // Replace temp with real card id & data\r\n          queryClient.setQueryData([\"cards\", deckId], (old = []) =>\r\n            old.map((c) => (c && c.id === tempId ? { id: docId, ...newCard } : c))\r\n          );\r\n          // Sucesso - carta adicionada\r\n        } catch (err) {\r\n          // Rollback para erros\r\n          console.error(\"Erro ao adicionar:\", err);\r\n          queryClient.setQueryData([\"cards\", deckId], (old = []) => old.filter((c) => c.id !== tempId));\r\n          alert(\"Erro ao adicionar carta: \" + (err.message || \"Tente novamente\"));\r\n        }\r\n      }\r\n\r\n      // Resetar estado e focar input para permitir adicionar mais\r\n      setQuery(\"\");\r\n      setSuggestions([]);\r\n      setShowSuggestions(false);\r\n      try {\r\n        inputRef.current?.focus();\r\n      } catch (e) {\r\n        /* ignore */\r\n      }\r\n\r\n      // Resetar estado e focar input para permitir adicionar mais\r\n      setQuery(\"\");\r\n      setSuggestions([]);\r\n      setShowSuggestions(false);\r\n      try {\r\n        inputRef.current?.focus();\r\n      } catch (e) {\r\n        /* ignore */\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erro ao adicionar carta:\", error);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (selectedIndex >= 0 && suggestions[selectedIndex]) {\r\n      handleSearch(suggestions[selectedIndex]);\r\n    } else if (query.trim()) {\r\n      handleSearch(query.trim());\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (!showSuggestions || suggestions.length === 0) return;\r\n\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev < suggestions.length - 1 ? prev + 1 : prev));\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev > 0 ? prev - 1 : -1));\r\n    } else if (e.key === \"Escape\") {\r\n      setShowSuggestions(false);\r\n      setSelectedIndex(-1);\r\n    }\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    handleSearch(suggestion);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ y: -20, opacity: 0 }}\r\n      animate={{ y: 0, opacity: 1 }}\r\n      className=\"sticky top-0 z-20 bg-gray-900 border-b border-gray-800 p-4\"\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"flex gap-2 relative\" ref={searchRef}>\r\n        <div className=\"relative flex-1\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 z-10\" />\r\n          <Input\r\n            id=\"searchCard\"\r\n            name=\"searchCard\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            ref={inputRef}\r\n            onKeyDown={handleKeyDown}\r\n            onFocus={() => {\r\n              if (suggestions.length > 0) {\r\n                setShowSuggestions(true);\r\n              }\r\n            }}\r\n            placeholder=\"Buscar carta no Scryfall...\"\r\n            className=\"pl-10 bg-gray-800 border-gray-700 text-white placeholder:text-gray-500 focus:border-orange-500\"\r\n            autoComplete=\"off\"\r\n          />\r\n\r\n          {/* Suggestions Dropdown */}\r\n          <AnimatePresence>\r\n            {showSuggestions && suggestions.length > 0 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: -10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                className=\"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl max-h-80 overflow-y-auto z-50\"\r\n              >\r\n                {suggestions.map((suggestion, index) => (\r\n                  <motion.div\r\n                    key={index}\r\n                    onClick={() => handleSuggestionClick(suggestion)}\r\n                    className={`px-4 py-3 cursor-pointer transition-colors border-b border-gray-700 last:border-b-0 ${\r\n                      index === selectedIndex\r\n                        ? \"bg-orange-500/20 text-orange-400\"\r\n                        : \"text-gray-300 hover:bg-gray-700\"\r\n                    }`}\r\n                    whileHover={{ x: 4 }}\r\n                  >\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Search className=\"w-4 h-4 text-gray-500\" />\r\n                      <span className=\"font-medium\">{suggestion}</span>\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Loading indicator for suggestions */}\r\n          {isLoadingSuggestions && (\r\n            <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n              <Loader2 className=\"w-4 h-4 animate-spin text-gray-400\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </form>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
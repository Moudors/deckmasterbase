{"ast":null,"code":"// src/authSupabase.ts\nimport{supabase}from\"./supabase\";// Nota: A cria√ß√£o do documento do usu√°rio agora √© feita automaticamente\n// no supabase.ts quando o onAuthStateChanged √© disparado\n// Criar usu√°rio com email/senha\nexport async function signUp(email,password){const{data,error}=await supabase.auth.signUp({email,password});if(error)throw error;if(data.user){var _data$user$user_metad,_data$user$user_metad2;const user={uid:data.user.id,email:data.user.email,displayName:((_data$user$user_metad=data.user.user_metadata)===null||_data$user$user_metad===void 0?void 0:_data$user$user_metad.display_name)||\"\",photoURL:((_data$user$user_metad2=data.user.user_metadata)===null||_data$user$user_metad2===void 0?void 0:_data$user$user_metad2.avatar_url)||null};// A cria√ß√£o do documento √© feita automaticamente no supabase.ts\nreturn user;}throw new Error('Erro ao criar usu√°rio');}// Login com email/senha\nexport async function signIn(email,password){console.log('üîê Tentando fazer login com:',email);const{data,error}=await supabase.auth.signInWithPassword({email,password});if(error){console.error('‚ùå Erro no login:',error);throw error;}if(data.user){var _data$user$user_metad3,_data$user$user_metad4,_data$user$user_metad5;console.log('‚úÖ Login realizado com sucesso:',data.user.email);const user={uid:data.user.id,email:data.user.email,displayName:((_data$user$user_metad3=data.user.user_metadata)===null||_data$user$user_metad3===void 0?void 0:_data$user$user_metad3.display_name)||((_data$user$user_metad4=data.user.user_metadata)===null||_data$user$user_metad4===void 0?void 0:_data$user$user_metad4.full_name)||\"\",photoURL:((_data$user$user_metad5=data.user.user_metadata)===null||_data$user$user_metad5===void 0?void 0:_data$user$user_metad5.avatar_url)||null};// A cria√ß√£o do documento √© feita automaticamente no supabase.ts\nreturn user;}throw new Error('Erro ao fazer login');}// Login com Google\nexport async function signInWithGoogle(){try{const redirectTo=\"\".concat(window.location.origin,\"/\");console.log('=== INICIANDO GOOGLE OAUTH ===');console.log('Redirect URL:',redirectTo);console.log('Origin:',window.location.origin);const{data,error}=await supabase.auth.signInWithOAuth({provider:'google',options:{redirectTo:redirectTo}});if(error){console.error('=== ERRO OAUTH ===');console.error('Error:',error);console.error('Message:',error.message);throw error;}console.log('=== OAUTH SUCESSO ===');console.log('Data:',data);console.log('URL:',data.url);return data;}catch(err){console.error('=== EXCEPTION ===');console.error(err);throw err;}}// Logout\nexport async function signOut(){const{error}=await supabase.auth.signOut();if(error)throw error;}","map":{"version":3,"names":["supabase","signUp","email","password","data","error","auth","user","_data$user$user_metad","_data$user$user_metad2","uid","id","displayName","user_metadata","display_name","photoURL","avatar_url","Error","signIn","console","log","signInWithPassword","_data$user$user_metad3","_data$user$user_metad4","_data$user$user_metad5","full_name","signInWithGoogle","redirectTo","concat","window","location","origin","signInWithOAuth","provider","options","message","url","err","signOut"],"sources":["C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/src/authSupabase.ts"],"sourcesContent":["// src/authSupabase.ts\r\nimport { supabase } from \"./supabase\";\r\n\r\n// Nota: A cria√ß√£o do documento do usu√°rio agora √© feita automaticamente\r\n// no supabase.ts quando o onAuthStateChanged √© disparado\r\n\r\n// Criar usu√°rio com email/senha\r\nexport async function signUp(email: string, password: string) {\r\n  const { data, error } = await supabase.auth.signUp({\r\n    email,\r\n    password,\r\n  });\r\n\r\n  if (error) throw error;\r\n\r\n  if (data.user) {\r\n    const user = {\r\n      uid: data.user.id,\r\n      email: data.user.email,\r\n      displayName: data.user.user_metadata?.display_name || \"\",\r\n      photoURL: data.user.user_metadata?.avatar_url || null\r\n    };\r\n    \r\n    // A cria√ß√£o do documento √© feita automaticamente no supabase.ts\r\n    return user;\r\n  }\r\n\r\n  throw new Error('Erro ao criar usu√°rio');\r\n}\r\n\r\n// Login com email/senha\r\nexport async function signIn(email: string, password: string) {\r\n  console.log('üîê Tentando fazer login com:', email);\r\n  \r\n  const { data, error } = await supabase.auth.signInWithPassword({\r\n    email,\r\n    password,\r\n  });\r\n\r\n  if (error) {\r\n    console.error('‚ùå Erro no login:', error);\r\n    throw error;\r\n  }\r\n\r\n  if (data.user) {\r\n    console.log('‚úÖ Login realizado com sucesso:', data.user.email);\r\n    \r\n    const user = {\r\n      uid: data.user.id,\r\n      email: data.user.email,\r\n      displayName: data.user.user_metadata?.display_name || data.user.user_metadata?.full_name || \"\",\r\n      photoURL: data.user.user_metadata?.avatar_url || null\r\n    };\r\n    \r\n    // A cria√ß√£o do documento √© feita automaticamente no supabase.ts\r\n    return user;\r\n  }\r\n\r\n  throw new Error('Erro ao fazer login');\r\n}\r\n\r\n// Login com Google\r\nexport async function signInWithGoogle() {\r\n  try {\r\n    const redirectTo = `${window.location.origin}/`;\r\n\r\n    console.log('=== INICIANDO GOOGLE OAUTH ===');\r\n    console.log('Redirect URL:', redirectTo);\r\n    console.log('Origin:', window.location.origin);\r\n\r\n    const { data, error } = await supabase.auth.signInWithOAuth({\r\n      provider: 'google',\r\n      options: {\r\n        redirectTo: redirectTo,\r\n      }\r\n    });\r\n\r\n    if (error) {\r\n      console.error('=== ERRO OAUTH ===');\r\n      console.error('Error:', error);\r\n      console.error('Message:', error.message);\r\n      throw error;\r\n    }\r\n\r\n    console.log('=== OAUTH SUCESSO ===');\r\n    console.log('Data:', data);\r\n    console.log('URL:', data.url);\r\n    \r\n    return data;\r\n  } catch (err) {\r\n    console.error('=== EXCEPTION ===');\r\n    console.error(err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n// Logout\r\nexport async function signOut() {\r\n  const { error } = await supabase.auth.signOut();\r\n  if (error) throw error;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CardZoomModal(_ref){var _currentFace$image_ur,_card$image_uris;let{card,onClose}=_ref;const[faceIndex,setFaceIndex]=useState(0);let touchStartX=0;// Bloquear scroll e interações de fundo quando modal aberto\nuseEffect(()=>{// Salvar overflow original\nconst originalOverflow=document.body.style.overflow;const originalTouchAction=document.body.style.touchAction;// Bloquear scroll e touch\ndocument.body.style.overflow='hidden';document.body.style.touchAction='none';// Restaurar ao desmontar\nreturn()=>{document.body.style.overflow=originalOverflow;document.body.style.touchAction=originalTouchAction;};},[]);// Detectar swipe para esquerda para fechar\nfunction handleTouchStart(e){touchStartX=e.touches[0].clientX;}function handleTouchEnd(e){const touchEndX=e.changedTouches[0].clientX;const diff=touchEndX-touchStartX;// Swipe para esquerda: fechar modal\nif(diff<-100){onClose();return;}}// Alternar face com botão\nconst toggleFace=()=>{setFaceIndex(prev=>(prev+1)%card.card_faces.length);};const currentFace=card.card_faces?card.card_faces[faceIndex]:card;const imageUrl=((_currentFace$image_ur=currentFace.image_uris)===null||_currentFace$image_ur===void 0?void 0:_currentFace$image_ur.normal)||currentFace.image_url||((_card$image_uris=card.image_uris)===null||_card$image_uris===void 0?void 0:_card$image_uris.normal)||card.image_url;return/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\",style:{touchAction:'auto'},onClick:onClose,children:/*#__PURE__*/_jsxs(motion.div,{initial:{scale:0.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0.8,opacity:0},transition:{type:\"spring\",damping:25,stiffness:300},className:\"relative max-w-md w-full\",style:{touchAction:'auto'},onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:card.card_name||card.name,className:\"w-full rounded-lg shadow-2xl\",onTouchStart:handleTouchStart,onTouchEnd:handleTouchEnd}),card.card_faces&&card.card_faces.length>1&&/*#__PURE__*/_jsxs(\"button\",{onClick:toggleFace,className:\"absolute -bottom-1 -right-1 w-10 h-10 bg-white/40 rounded-full shadow-lg flex items-center justify-center hover:bg-white/60 transition-all hover:scale-110 active:scale-95\",\"aria-label\":\"Alternar face da carta\",title:\"Virar carta\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-gray-800\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 w-5 h-5 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center font-bold\",children:faceIndex+1})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full\",children:\"Swipe \\u2190 para fechar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute -top-3 -right-3 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors\",\"aria-label\":\"Fechar\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 18L18 6M6 6l12 12\"})})})]})})});}","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","CardZoomModal","_ref","_currentFace$image_ur","_card$image_uris","card","onClose","faceIndex","setFaceIndex","touchStartX","originalOverflow","document","body","style","overflow","originalTouchAction","touchAction","handleTouchStart","e","touches","clientX","handleTouchEnd","touchEndX","changedTouches","diff","toggleFace","prev","card_faces","length","currentFace","imageUrl","image_uris","normal","image_url","children","div","initial","opacity","animate","exit","className","onClick","scale","transition","type","damping","stiffness","stopPropagation","src","alt","card_name","name","onTouchStart","onTouchEnd","title","fill","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","stroke","d"],"sources":["C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/src/components/deck/CardZoomModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nexport default function CardZoomModal({ card, onClose }) {\r\n  const [faceIndex, setFaceIndex] = useState(0);\r\n  let touchStartX = 0;\r\n\r\n  // Bloquear scroll e interações de fundo quando modal aberto\r\n  useEffect(() => {\r\n    // Salvar overflow original\r\n    const originalOverflow = document.body.style.overflow;\r\n    const originalTouchAction = document.body.style.touchAction;\r\n    \r\n    // Bloquear scroll e touch\r\n    document.body.style.overflow = 'hidden';\r\n    document.body.style.touchAction = 'none';\r\n    \r\n    // Restaurar ao desmontar\r\n    return () => {\r\n      document.body.style.overflow = originalOverflow;\r\n      document.body.style.touchAction = originalTouchAction;\r\n    };\r\n  }, []);\r\n\r\n  // Detectar swipe para esquerda para fechar\r\n  function handleTouchStart(e) {\r\n    touchStartX = e.touches[0].clientX;\r\n  }\r\n\r\n  function handleTouchEnd(e) {\r\n    const touchEndX = e.changedTouches[0].clientX;\r\n    const diff = touchEndX - touchStartX;\r\n\r\n    // Swipe para esquerda: fechar modal\r\n    if (diff < -100) {\r\n      onClose();\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Alternar face com botão\r\n  const toggleFace = () => {\r\n    setFaceIndex((prev) => (prev + 1) % card.card_faces.length);\r\n  };\r\n\r\n  const currentFace = card.card_faces ? card.card_faces[faceIndex] : card;\r\n  const imageUrl = currentFace.image_uris?.normal || currentFace.image_url || card.image_uris?.normal || card.image_url;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n        style={{ touchAction: 'auto' }}\r\n        onClick={onClose}\r\n      >\r\n        <motion.div\r\n          initial={{ scale: 0.8, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          exit={{ scale: 0.8, opacity: 0 }}\r\n          transition={{ type: \"spring\", damping: 25, stiffness: 300 }}\r\n          className=\"relative max-w-md w-full\"\r\n          style={{ touchAction: 'auto' }}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <img\r\n            src={imageUrl}\r\n            alt={card.card_name || card.name}\r\n            className=\"w-full rounded-lg shadow-2xl\"\r\n            onTouchStart={handleTouchStart}\r\n            onTouchEnd={handleTouchEnd}\r\n          />\r\n\r\n          {/* Botão de alternar face (canto inferior direito) */}\r\n          {card.card_faces && card.card_faces.length > 1 && (\r\n            <button\r\n              onClick={toggleFace}\r\n              className=\"absolute -bottom-1 -right-1 w-10 h-10 bg-white/40 rounded-full shadow-lg flex items-center justify-center hover:bg-white/60 transition-all hover:scale-110 active:scale-95\"\r\n              aria-label=\"Alternar face da carta\"\r\n              title=\"Virar carta\"\r\n            >\r\n              <svg\r\n                className=\"w-5 h-5 text-gray-800\"\r\n                fill=\"none\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth=\"2\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n              >\r\n                {/* Ícone de rotação/flip */}\r\n                <path d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n              </svg>\r\n              <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center font-bold\">\r\n                {faceIndex + 1}\r\n              </span>\r\n            </button>\r\n          )}\r\n\r\n          {/* Dica de swipe */}\r\n          <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full\">\r\n            Swipe ← para fechar\r\n          </div>\r\n\r\n          {/* Botão de fechar (desktop) */}\r\n          <button\r\n            onClick={onClose}\r\n            className=\"absolute -top-3 -right-3 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors\"\r\n            aria-label=\"Fechar\"\r\n          >\r\n            <svg\r\n              className=\"w-5 h-5\"\r\n              fill=\"none\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth=\"2\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path d=\"M6 18L18 6M6 6l12 12\"></path>\r\n            </svg>\r\n          </button>\r\n        </motion.div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
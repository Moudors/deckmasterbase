{"ast":null,"code":"import _objectSpread from\"C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import*as Dialog from\"@radix-ui/react-dialog\";import{Input}from\"@/components/ui/input\";import{Search,Loader2,Book,X}from\"lucide-react\";import{motion,AnimatePresence}from\"framer-motion\";import{renderManaSymbols}from\"@/utils/manaSymbols\";import{traduzirCarta,translateText}from\"@/services/translator\";// ðŸ”§ FunÃ§Ãµes de API\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export async function getAutocomplete(query){// Autocomplete suporta busca em qualquer idioma automaticamente\nconst res=await fetch(\"https://api.scryfall.com/cards/autocomplete?q=\".concat(encodeURIComponent(query),\"&include_extras=true\"));const data=await res.json();return data.data||[];}export async function getCardByName(name){// EstratÃ©gia 1: Busca fuzzy normal (melhor para nomes em inglÃªs e aproximados)\nlet res=await fetch(\"https://api.scryfall.com/cards/named?fuzzy=\".concat(encodeURIComponent(name)));if(res.ok){return await res.json();}// EstratÃ©gia 2: Busca avanÃ§ada por nome exato (portuguÃªs, espanhol, etc.)\nres=await fetch(\"https://api.scryfall.com/cards/search?q=!\\\"\".concat(encodeURIComponent(name),\"\\\"&unique=prints\"));if(res.ok){const data=await res.json();if(data.data&&data.data.length>0){return data.data[0];}}// EstratÃ©gia 3: Busca por palavras parciais em qualquer idioma\nres=await fetch(\"https://api.scryfall.com/cards/search?q=\".concat(encodeURIComponent(name),\"&unique=cards&order=name\"));if(res.ok){const data=await res.json();if(data.data&&data.data.length>0){return data.data[0];}}// EstratÃ©gia 4: Busca em prints com nome estrangeiro\nres=await fetch(\"https://api.scryfall.com/cards/search?q=foreign:\\\"\".concat(encodeURIComponent(name),\"\\\"&unique=cards\"));if(res.ok){const data=await res.json();if(data.data&&data.data.length>0){return data.data[0];}}throw new Error(\"Carta nÃ£o encontrada. Tente usar o nome em inglÃªs ou verifique a ortografia.\");}// ðŸ”§ Buscar rulings oficiais\nasync function getRulings(rulingsUri){const res=await fetch(rulingsUri);if(!res.ok)throw new Error(\"Erro ao buscar rulings\");const data=await res.json();return data.data;}export default function SearchRulesDialog(_ref){var _currentFace$image_ur,_currentFace$type_lin,_currentFace$oracle_t;let{isOpen,onClose}=_ref;const[query,setQuery]=useState(\"\");const[suggestions,setSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const[isLoadingSuggestions,setIsLoadingSuggestions]=useState(false);const[selectedIndex,setSelectedIndex]=useState(-1);const[isSearching,setIsSearching]=useState(false);const[result,setResult]=useState(null);const[currentFaceIndex,setCurrentFaceIndex]=useState(0);const[error,setError]=useState(null);const searchRef=useRef(null);// Swipe\nconst[touchStartX,setTouchStartX]=useState(null);const handleTouchStart=e=>{setTouchStartX(e.touches[0].clientX);};const handleTouchEnd=e=>{if(touchStartX===null)return;const touchEndX=e.changedTouches[0].clientX;const diff=touchStartX-touchEndX;if(Math.abs(diff)>50)handleNextFace();setTouchStartX(null);};// Fechar dropdown ao clicar fora\nuseEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setShowSuggestions(false);}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);// Autocomplete com debounce\nuseEffect(()=>{if(query.trim().length<2){setSuggestions([]);setShowSuggestions(false);return;}const controller=new AbortController();setIsLoadingSuggestions(true);const debounceTimer=setTimeout(async()=>{try{const data=await getAutocomplete(query);setSuggestions(data);setShowSuggestions(true);setSelectedIndex(-1);}catch(err){console.error(err);}finally{setIsLoadingSuggestions(false);}},300);return()=>{controller.abort();clearTimeout(debounceTimer);};},[query]);// Selecionar carta\nconst handleCardSelect=async cardName=>{setShowSuggestions(false);setQuery(cardName);setIsSearching(true);setError(null);setResult(null);setCurrentFaceIndex(0);try{const fetchedCard=await getCardByName(cardName);// ðŸ”‘ traduz carta (ediÃ§Ã£o PT ou Azure, incluindo faces)\nconst cartaTraduzida=await traduzirCarta(fetchedCard);// ðŸ”‘ rulings sempre traduzidas\nlet rulingsTraduzidas=[];if(fetchedCard.rulings_uri){const rulings=await getRulings(fetchedCard.rulings_uri);rulingsTraduzidas=await Promise.all(rulings.map(async r=>_objectSpread(_objectSpread({},r),{},{comment:await translateText(r.comment,\"pt\")})));}// ðŸ”‘ monta objeto final jÃ¡ com rulings\nsetResult(_objectSpread(_objectSpread({},cartaTraduzida),{},{rulings:rulingsTraduzidas}));}catch(err){setError(err instanceof Error?err.message:\"Erro desconhecido\");}finally{setIsSearching(false);}};// Teclas de navegaÃ§Ã£o\nconst handleKeyDown=e=>{if(!showSuggestions||suggestions.length===0)return;if(e.key===\"ArrowDown\"){e.preventDefault();setSelectedIndex(prev=>prev<suggestions.length-1?prev+1:prev);}else if(e.key===\"ArrowUp\"){e.preventDefault();setSelectedIndex(prev=>prev>0?prev-1:-1);}else if(e.key===\"Enter\"){e.preventDefault();if(selectedIndex>=0&&suggestions[selectedIndex]){handleCardSelect(suggestions[selectedIndex]);}else if(query.trim()){handleCardSelect(query.trim());}}else if(e.key===\"Escape\"){setShowSuggestions(false);setSelectedIndex(-1);}};const handleNextFace=()=>{if(!(result!==null&&result!==void 0&&result.card_faces)||result.card_faces.length<=1)return;const faces=result.card_faces;setCurrentFaceIndex(prev=>(prev+1)%faces.length);};const currentFace=result!==null&&result!==void 0&&result.card_faces?result.card_faces[currentFaceIndex]:result;return/*#__PURE__*/_jsx(Dialog.Root,{open:isOpen,onOpenChange:onClose,children:/*#__PURE__*/_jsxs(Dialog.Portal,{children:[/*#__PURE__*/_jsx(Dialog.Overlay,{className:\"fixed inset-0 z-40 bg-black/70 backdrop-blur-sm\"}),/*#__PURE__*/_jsxs(Dialog.Content,{className:\"fixed left-1/2 top-1/2 z-50 w-[95vw] max-w-2xl h-[85vh] max-h-[85vh]\\r -translate-x-1/2 -translate-y-1/2 overflow-hidden rounded-lg\\r bg-gray-400/90 backdrop-blur-md border border-gray-600 p-4 flex flex-col\",\"aria-describedby\":\"search-rules-description\",children:[/*#__PURE__*/_jsx(Dialog.Title,{className:\"sr-only\",children:\"Buscar Regras de Cartas\"}),/*#__PURE__*/_jsx(Dialog.Description,{id:\"search-rules-description\",className:\"sr-only\",children:\"Busque por cartas do Magic: The Gathering e visualize suas regras traduzidas.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-2 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"flex items-center gap-2 text-black text-lg\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-5 h-5\"}),\"Buscar Regras\"]}),/*#__PURE__*/_jsx(Dialog.Close,{asChild:true,children:/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Fechar\",className:\"rounded p-1 text-black/70 hover:text-black hover:bg-black/10\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 flex-1 flex flex-col min-h-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-shrink-0\",ref:searchRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600 z-10\"}),/*#__PURE__*/_jsx(Input,{value:query,onChange:e=>setQuery(e.target.value),onKeyDown:handleKeyDown,onFocus:()=>suggestions.length>0&&setShowSuggestions(true),placeholder:\"Digite o nome da carta...\",className:\"pl-9 h-10 text-sm bg-white/90 border-gray-500 text-black placeholder:text-gray-600\",disabled:isSearching,autoComplete:\"off\"}),isLoadingSuggestions&&/*#__PURE__*/_jsx(Loader2,{className:\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-gray-600\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>query.trim()&&handleCardSelect(query.trim()),disabled:isSearching||!query.trim(),className:\"h-10 px-4 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white rounded-md transition-colors flex items-center gap-2 disabled:cursor-not-allowed\",title:\"Buscar diretamente sem autocomplete\",children:isSearching?/*#__PURE__*/_jsx(Loader2,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:showSuggestions&&suggestions.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:\"absolute top-full left-0 right-0 mt-2 bg-white/95 border border-gray-500 rounded-lg shadow-2xl max-h-60 overflow-y-auto z-50\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(motion.div,{onClick:()=>handleCardSelect(suggestion),className:\"px-3 py-2.5 cursor-pointer transition-colors border-b border-gray-300 last:border-b-0 \".concat(index===selectedIndex?\"bg-orange-500/20 text-orange-800\":\"text-black hover:bg-gray-200\"),whileHover:{x:4},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-3.5 h-3.5 text-gray-600 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-sm\",children:suggestion})]})},index))})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 rounded-lg p-2.5 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-800\",children:error})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto overflow-x-hidden pr-2 -mr-2\",children:[isSearching&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-10 h-10 animate-spin text-orange-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-black\",children:\"Buscando informa\\xE7\\xF5es...\"})]})}),result&&!isSearching&&currentFace&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white/90 rounded-lg p-3 border border-gray-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-start gap-3 mb-3 pb-3 border-b border-gray-300\",children:[((_currentFace$image_ur=currentFace.image_uris)===null||_currentFace$image_ur===void 0?void 0:_currentFace$image_ur.normal)&&/*#__PURE__*/_jsx(\"img\",{src:currentFace.image_uris.normal,alt:currentFace.name,className:\"w-32 sm:w-40 h-auto rounded-lg shadow-lg mx-auto sm:mx-0 cursor-pointer\",onTouchStart:handleTouchStart,onTouchEnd:handleTouchEnd,draggable:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 w-full\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base sm:text-lg font-bold text-black mb-1 text-center sm:text-left\",children:currentFace.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm text-gray-700\",children:(_currentFace$type_lin=currentFace.type_line)!==null&&_currentFace$type_lin!==void 0?_currentFace$type_lin:\"\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"prose prose-sm max-w-none text-black\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap text-xs sm:text-sm leading-relaxed\",children:renderManaSymbols((_currentFace$oracle_t=currentFace.oracle_text)!==null&&_currentFace$oracle_t!==void 0?_currentFace$oracle_t:\"\")}),(result===null||result===void 0?void 0:result.rulings)&&result.rulings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-sm text-black\",children:\"Notas oficiais (Rulings)\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc ml-4 text-xs text-gray-700\",children:result.rulings.map((r,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[r.published_at,\":\"]}),\" \",r.comment]},i))})]})]})]}),!isSearching&&!result&&!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12 text-center\",children:[/*#__PURE__*/_jsx(Book,{className:\"w-12 h-12 text-gray-600 mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-black font-medium text-sm mb-1\",children:\"Busque por uma carta\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-700 px-4\",children:\"Digite o nome de uma carta em qualquer idioma para ver sua tradu\\xE7\\xE3o e regras em portugu\\xEAs\"})]})]})]})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","Dialog","Input","Search","Loader2","Book","X","motion","AnimatePresence","renderManaSymbols","traduzirCarta","translateText","jsx","_jsx","jsxs","_jsxs","getAutocomplete","query","res","fetch","concat","encodeURIComponent","data","json","getCardByName","name","ok","length","Error","getRulings","rulingsUri","SearchRulesDialog","_ref","_currentFace$image_ur","_currentFace$type_lin","_currentFace$oracle_t","isOpen","onClose","setQuery","suggestions","setSuggestions","showSuggestions","setShowSuggestions","isLoadingSuggestions","setIsLoadingSuggestions","selectedIndex","setSelectedIndex","isSearching","setIsSearching","result","setResult","currentFaceIndex","setCurrentFaceIndex","error","setError","searchRef","touchStartX","setTouchStartX","handleTouchStart","e","touches","clientX","handleTouchEnd","touchEndX","changedTouches","diff","Math","abs","handleNextFace","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","trim","controller","AbortController","debounceTimer","setTimeout","err","console","abort","clearTimeout","handleCardSelect","cardName","fetchedCard","cartaTraduzida","rulingsTraduzidas","rulings_uri","rulings","Promise","all","map","r","_objectSpread","comment","message","handleKeyDown","key","preventDefault","prev","card_faces","faces","currentFace","Root","open","onOpenChange","children","Portal","Overlay","className","Content","Title","Description","id","Close","asChild","ref","value","onChange","onKeyDown","onFocus","placeholder","disabled","autoComplete","onClick","title","div","initial","opacity","y","animate","exit","suggestion","index","whileHover","x","image_uris","normal","src","alt","onTouchStart","onTouchEnd","draggable","type_line","oracle_text","i","published_at"],"sources":["C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/src/components/rules/SearchRulesDialog.tsx"],"sourcesContent":["import React, {\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  KeyboardEvent,\r\n  ChangeEvent,\r\n} from \"react\";\r\nimport * as Dialog from \"@radix-ui/react-dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Search, Loader2, Book, X } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { renderManaSymbols } from \"@/utils/manaSymbols\";\r\nimport { traduzirCarta, translateText, ScryfallCard } from \"@/services/translator\";\r\n\r\n// ðŸ”§ FunÃ§Ãµes de API\r\nexport async function getAutocomplete(query: string): Promise<string[]> {\r\n  // Autocomplete suporta busca em qualquer idioma automaticamente\r\n  const res = await fetch(\r\n    `https://api.scryfall.com/cards/autocomplete?q=${encodeURIComponent(query)}&include_extras=true`\r\n  );\r\n  const data = await res.json();\r\n  return data.data || [];\r\n}\r\n\r\nexport async function getCardByName(name: string): Promise<ScryfallCard> {\r\n  // EstratÃ©gia 1: Busca fuzzy normal (melhor para nomes em inglÃªs e aproximados)\r\n  let res = await fetch(\r\n    `https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(name)}`\r\n  );\r\n  \r\n  if (res.ok) {\r\n    return await res.json();\r\n  }\r\n  \r\n  // EstratÃ©gia 2: Busca avanÃ§ada por nome exato (portuguÃªs, espanhol, etc.)\r\n  res = await fetch(\r\n    `https://api.scryfall.com/cards/search?q=!\"${encodeURIComponent(name)}\"&unique=prints`\r\n  );\r\n  \r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    if (data.data && data.data.length > 0) {\r\n      return data.data[0];\r\n    }\r\n  }\r\n  \r\n  // EstratÃ©gia 3: Busca por palavras parciais em qualquer idioma\r\n  res = await fetch(\r\n    `https://api.scryfall.com/cards/search?q=${encodeURIComponent(name)}&unique=cards&order=name`\r\n  );\r\n  \r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    if (data.data && data.data.length > 0) {\r\n      return data.data[0];\r\n    }\r\n  }\r\n  \r\n  // EstratÃ©gia 4: Busca em prints com nome estrangeiro\r\n  res = await fetch(\r\n    `https://api.scryfall.com/cards/search?q=foreign:\"${encodeURIComponent(name)}\"&unique=cards`\r\n  );\r\n  \r\n  if (res.ok) {\r\n    const data = await res.json();\r\n    if (data.data && data.data.length > 0) {\r\n      return data.data[0];\r\n    }\r\n  }\r\n  \r\n  throw new Error(\"Carta nÃ£o encontrada. Tente usar o nome em inglÃªs ou verifique a ortografia.\");\r\n}\r\n\r\n// ðŸ”§ Buscar rulings oficiais\r\nasync function getRulings(rulingsUri: string) {\r\n  const res = await fetch(rulingsUri);\r\n  if (!res.ok) throw new Error(\"Erro ao buscar rulings\");\r\n  const data = await res.json();\r\n  return data.data as { published_at: string; comment: string; source: string }[];\r\n}\r\n\r\ninterface SearchRulesDialogProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SearchRulesDialog({\r\n  isOpen,\r\n  onClose,\r\n}: SearchRulesDialogProps) {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState<string[]>([]);\r\n  const [showSuggestions, setShowSuggestions] = useState(false);\r\n  const [isLoadingSuggestions, setIsLoadingSuggestions] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(-1);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [result, setResult] = useState<ScryfallCard | null>(null);\r\n  const [currentFaceIndex, setCurrentFaceIndex] = useState(0);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const searchRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // Swipe\r\n  const [touchStartX, setTouchStartX] = useState<number | null>(null);\r\n\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    setTouchStartX(e.touches[0].clientX);\r\n  };\r\n\r\n  const handleTouchEnd = (e: React.TouchEvent) => {\r\n    if (touchStartX === null) return;\r\n    const touchEndX = e.changedTouches[0].clientX;\r\n    const diff = touchStartX - touchEndX;\r\n    if (Math.abs(diff) > 50) handleNextFace();\r\n    setTouchStartX(null);\r\n  };\r\n\r\n  // Fechar dropdown ao clicar fora\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        searchRef.current &&\r\n        !searchRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowSuggestions(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // Autocomplete com debounce\r\n  useEffect(() => {\r\n    if (query.trim().length < 2) {\r\n      setSuggestions([]);\r\n      setShowSuggestions(false);\r\n      return;\r\n    }\r\n\r\n    const controller = new AbortController();\r\n    setIsLoadingSuggestions(true);\r\n\r\n    const debounceTimer = setTimeout(async () => {\r\n      try {\r\n        const data = await getAutocomplete(query);\r\n        setSuggestions(data);\r\n        setShowSuggestions(true);\r\n        setSelectedIndex(-1);\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setIsLoadingSuggestions(false);\r\n      }\r\n    }, 300);\r\n\r\n    return () => {\r\n      controller.abort();\r\n      clearTimeout(debounceTimer);\r\n    };\r\n  }, [query]);\r\n\r\n    // Selecionar carta\r\n  const handleCardSelect = async (cardName: string) => {\r\n    setShowSuggestions(false);\r\n    setQuery(cardName);\r\n    setIsSearching(true);\r\n    setError(null);\r\n    setResult(null);\r\n    setCurrentFaceIndex(0);\r\n\r\n    try {\r\n      const fetchedCard = await getCardByName(cardName);\r\n\r\n      // ðŸ”‘ traduz carta (ediÃ§Ã£o PT ou Azure, incluindo faces)\r\n      const cartaTraduzida = await traduzirCarta(fetchedCard);\r\n\r\n      // ðŸ”‘ rulings sempre traduzidas\r\n      let rulingsTraduzidas: { published_at: string; comment: string; source: string }[] = [];\r\n      if (fetchedCard.rulings_uri) {\r\n        const rulings = await getRulings(fetchedCard.rulings_uri);\r\n        rulingsTraduzidas = await Promise.all(\r\n          rulings.map(async (r) => ({\r\n            ...r,\r\n            comment: await translateText(r.comment, \"pt\"),\r\n          }))\r\n        );\r\n      }\r\n\r\n      // ðŸ”‘ monta objeto final jÃ¡ com rulings\r\n      setResult({\r\n        ...cartaTraduzida,\r\n        rulings: rulingsTraduzidas,\r\n      });\r\n    } catch (err: unknown) {\r\n      setError(err instanceof Error ? err.message : \"Erro desconhecido\");\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  // Teclas de navegaÃ§Ã£o\r\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (!showSuggestions || suggestions.length === 0) return;\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) =>\r\n        prev < suggestions.length - 1 ? prev + 1 : prev\r\n      );\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev > 0 ? prev - 1 : -1));\r\n    } else if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      if (selectedIndex >= 0 && suggestions[selectedIndex]) {\r\n        handleCardSelect(suggestions[selectedIndex]);\r\n      } else if (query.trim()) {\r\n        handleCardSelect(query.trim());\r\n      }\r\n    } else if (e.key === \"Escape\") {\r\n      setShowSuggestions(false);\r\n      setSelectedIndex(-1);\r\n    }\r\n  };\r\n\r\n  const handleNextFace = () => {\r\n    if (!result?.card_faces || result.card_faces.length <= 1) return;\r\n    const faces = result.card_faces;\r\n    setCurrentFaceIndex((prev) => (prev + 1) % faces.length);\r\n  };\r\n\r\n  const currentFace = result?.card_faces\r\n    ? result.card_faces[currentFaceIndex]\r\n    : result;\r\n\r\n  return (\r\n    <Dialog.Root open={isOpen} onOpenChange={onClose}>\r\n      <Dialog.Portal>\r\n        <Dialog.Overlay className=\"fixed inset-0 z-40 bg-black/70 backdrop-blur-sm\" />\r\n        <Dialog.Content\r\n          className=\"fixed left-1/2 top-1/2 z-50 w-[95vw] max-w-2xl h-[85vh] max-h-[85vh]\r\n                     -translate-x-1/2 -translate-y-1/2 overflow-hidden rounded-lg\r\n                     bg-gray-400/90 backdrop-blur-md border border-gray-600 p-4 flex flex-col\"\r\n          aria-describedby=\"search-rules-description\"\r\n        >\r\n          {/* TÃ­tulo acessÃ­vel mas visualmente oculto */}\r\n          <Dialog.Title className=\"sr-only\">Buscar Regras de Cartas</Dialog.Title>\r\n          <Dialog.Description id=\"search-rules-description\" className=\"sr-only\">\r\n            Busque por cartas do Magic: The Gathering e visualize suas regras traduzidas.\r\n          </Dialog.Description>\r\n          {/* Header */}\r\n          <div className=\"pb-2 flex items-center justify-between\">\r\n            <h2 className=\"flex items-center gap-2 text-black text-lg\">\r\n              <Book className=\"w-5 h-5\" />\r\n              Buscar Regras\r\n            </h2>\r\n            <Dialog.Close asChild>\r\n              <button\r\n                aria-label=\"Fechar\"\r\n                className=\"rounded p-1 text-black/70 hover:text-black hover:bg-black/10\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </Dialog.Close>\r\n          </div>\r\n\r\n          <div className=\"space-y-3 flex-1 flex flex-col min-h-0\">\r\n            {/* Search Input */}\r\n            <div className=\"relative flex-shrink-0\" ref={searchRef}>\r\n              <div className=\"relative flex gap-2\">\r\n                <div className=\"relative flex-1\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600 z-10\" />\r\n                  <Input\r\n                    value={query}\r\n                    onChange={(e: ChangeEvent<HTMLInputElement>) =>\r\n                      setQuery(e.target.value)\r\n                    }\r\n                    onKeyDown={handleKeyDown}\r\n                    onFocus={() =>\r\n                      suggestions.length > 0 && setShowSuggestions(true)\r\n                    }\r\n                    placeholder=\"Digite o nome da carta...\"\r\n                    className=\"pl-9 h-10 text-sm bg-white/90 border-gray-500 text-black placeholder:text-gray-600\"\r\n                    disabled={isSearching}\r\n                    autoComplete=\"off\"\r\n                  />\r\n                  {isLoadingSuggestions && (\r\n                    <Loader2 className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-gray-600\" />\r\n                  )}\r\n                </div>\r\n                \r\n                {/* BotÃ£o de busca forÃ§ada */}\r\n                <button\r\n                  onClick={() => query.trim() && handleCardSelect(query.trim())}\r\n                  disabled={isSearching || !query.trim()}\r\n                  className=\"h-10 px-4 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white rounded-md transition-colors flex items-center gap-2 disabled:cursor-not-allowed\"\r\n                  title=\"Buscar diretamente sem autocomplete\"\r\n                >\r\n                  {isSearching ? (\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  ) : (\r\n                    <Search className=\"w-4 h-4\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              {/* Suggestions */}\r\n              <AnimatePresence>\r\n                {showSuggestions && suggestions.length > 0 && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -10 }}\r\n                    className=\"absolute top-full left-0 right-0 mt-2 bg-white/95 border border-gray-500 rounded-lg shadow-2xl max-h-60 overflow-y-auto z-50\"\r\n                  >\r\n                    {suggestions.map((suggestion, index) => (\r\n                      <motion.div\r\n                        key={index}\r\n                        onClick={() => handleCardSelect(suggestion)}\r\n                        className={`px-3 py-2.5 cursor-pointer transition-colors border-b border-gray-300 last:border-b-0 ${\r\n                          index === selectedIndex\r\n                            ? \"bg-orange-500/20 text-orange-800\"\r\n                            : \"text-black hover:bg-gray-200\"\r\n                        }`}\r\n                        whileHover={{ x: 4 }}\r\n                      >\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Search className=\"w-3.5 h-3.5 text-gray-600 flex-shrink-0\" />\r\n                          <span className=\"font-medium text-sm\">{suggestion}</span>\r\n                        </div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </motion.div>\r\n                )}\r\n              </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Error */}\r\n            {error && (\r\n              <div className=\"bg-red-100 border border-red-400 rounded-lg p-2.5 flex-shrink-0\">\r\n                <p className=\"text-xs text-red-800\">{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Result */}\r\n            <div className=\"flex-1 overflow-y-auto overflow-x-hidden pr-2 -mr-2\">\r\n              {isSearching && (\r\n                <div className=\"flex items-center justify-center py-12\">\r\n                  <div className=\"text-center\">\r\n                    <Loader2 className=\"w-10 h-10 animate-spin text-orange-600 mx-auto mb-2\" />\r\n                    <p className=\"text-xs text-black\">Buscando informaÃ§Ãµes...</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {result && !isSearching && currentFace && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className=\"bg-white/90 rounded-lg p-3 border border-gray-400\"\r\n                >\r\n                  <div className=\"flex flex-col sm:flex-row items-start gap-3 mb-3 pb-3 border-b border-gray-300\">\r\n                    {currentFace.image_uris?.normal && (\r\n                      <img\r\n                        src={currentFace.image_uris.normal}\r\n                        alt={currentFace.name}\r\n                        className=\"w-32 sm:w-40 h-auto rounded-lg shadow-lg mx-auto sm:mx-0 cursor-pointer\"\r\n                        onTouchStart={handleTouchStart}\r\n                        onTouchEnd={handleTouchEnd}\r\n                        draggable={false}\r\n                      />\r\n                    )}\r\n                    <div className=\"flex-1 w-full\">\r\n                      <h3 className=\"text-base sm:text-lg font-bold text-black mb-1 text-center sm:text-left\">\r\n                        {currentFace.name}\r\n                      </h3>\r\n                      <p className=\"text-xs sm:text-sm text-gray-700\">\r\n                        {currentFace.type_line ?? \"\"}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"prose prose-sm max-w-none text-black\">\r\n                    <div className=\"whitespace-pre-wrap text-xs sm:text-sm leading-relaxed\">\r\n                      {renderManaSymbols(currentFace.oracle_text ?? \"\")}\r\n                    </div>\r\n\r\n                   {/* ðŸ”‘ Rulings traduzidas */}\r\n                    {result?.rulings && result.rulings.length > 0 && (\r\n                      <div className=\"mt-3\">\r\n                        <h4 className=\"font-semibold text-sm text-black\">\r\n                          Notas oficiais (Rulings)\r\n                        </h4>\r\n                        <ul className=\"list-disc ml-4 text-xs text-gray-700\">\r\n                          {result.rulings.map(\r\n                            (\r\n                              r: { published_at: string; comment: string },\r\n                              i: number\r\n                            ) => (\r\n                              <li key={i}>\r\n                                <span className=\"font-medium\">{r.published_at}:</span>{\" \"}\r\n                                {r.comment}\r\n                              </li>\r\n                            )\r\n                          )}\r\n                        </ul>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n\r\n              {!isSearching && !result && !error && (\r\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                  <Book className=\"w-12 h-12 text-gray-600 mb-2\" />\r\n                  <p className=\"text-black font-medium text-sm mb-1\">\r\n                    Busque por uma carta\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-700 px-4\">\r\n                    Digite o nome de uma carta em qualquer idioma para ver sua traduÃ§Ã£o e\r\n                    regras em portuguÃªs\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Dialog.Content>\r\n      </Dialog.Portal>\r\n    </Dialog.Root>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
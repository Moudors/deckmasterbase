{"ast":null,"code":"// Componente de debug para monitorar cache e storage\nimport React,{useState}from'react';import{useCacheStatus,useCacheClear}from'../../lib/useCacheHooks';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function CacheDebugPanel(){const[isOpen,setIsOpen]=useState(false);const status=useCacheStatus();const{clearCache,isClearing}=useCacheClear();const formatBytes=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i)*100)/100+' '+sizes[i];};if(!isOpen){return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(true),className:\"fixed bottom-4 right-4 bg-gray-800 text-white px-3 py-2 rounded-lg shadow-lg hover:bg-gray-700 transition-colors text-sm z-50\",title:\"Abrir painel de debug do cache\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCA\"}),status.warning&&/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-4 right-4 bg-gray-900 text-white p-4 rounded-lg shadow-2xl max-w-sm z-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg\",children:\"Cache & Storage\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsOpen(false),className:\"text-gray-400 hover:text-white\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"Storage:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono\",children:[formatBytes(status.storageUsed),\" / \",formatBytes(status.storageQuota)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-700 rounded-full h-2 overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full transition-all \".concat(status.warning?'bg-red-500':'bg-blue-500'),style:{width:\"\".concat(Math.min(status.percentUsed,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right text-xs text-gray-400 mt-1\",children:[status.percentUsed.toFixed(1),\"% usado\"]}),status.warning&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs mt-1\",children:\"\\u26A0\\uFE0F Storage quase cheio!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between border-t border-gray-700 pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"Queries em cache:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono\",children:status.reactQueryQueries})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"Opera\\xE7\\xF5es pendentes:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono\",children:[status.pendingSync,status.pendingSync>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-yellow-400\",children:\"\\u23F3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-700 pt-3 space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(window.cacheManager){const info=await window.cacheManager.checkUsage();console.log('📊 Storage Usage:',info);}},className:\"w-full bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded transition-colors\",children:\"\\uD83D\\uDD0D Log Status Detalhado\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCache,disabled:isClearing,className:\"w-full bg-red-600 hover:bg-red-700 px-3 py-2 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",children:isClearing?'🧹 Limpando...':'🧹 Limpar Cache'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.offlineSyncManager){window.offlineSyncManager.logQueueInfo();}},className:\"w-full bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded transition-colors\",children:\"\\uD83D\\uDCE6 Ver Fila Offline\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 border-t border-gray-700 pt-2\",children:\"\\uD83D\\uDCA1 Dica: Use o console do navegador (F12) para mais detalhes\"})]})]});}","map":{"version":3,"names":["React","useState","useCacheStatus","useCacheClear","jsx","_jsx","jsxs","_jsxs","CacheDebugPanel","isOpen","setIsOpen","status","clearCache","isClearing","formatBytes","bytes","k","sizes","i","Math","floor","log","round","pow","onClick","className","title","children","warning","storageUsed","storageQuota","concat","style","width","min","percentUsed","toFixed","reactQueryQueries","pendingSync","window","cacheManager","info","checkUsage","console","disabled","offlineSyncManager","logQueueInfo"],"sources":["C:/Users/Lucas Araujo/Desktop/supabase/DeckMaster/src/components/ui/CacheDebugPanel.jsx"],"sourcesContent":["// Componente de debug para monitorar cache e storage\r\nimport React, { useState } from 'react';\r\nimport { useCacheStatus, useCacheClear } from '../../lib/useCacheHooks';\r\n\r\nexport function CacheDebugPanel() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const status = useCacheStatus();\r\n  const { clearCache, isClearing } = useCacheClear();\r\n\r\n  const formatBytes = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  if (!isOpen) {\r\n    return (\r\n      <button\r\n        onClick={() => setIsOpen(true)}\r\n        className=\"fixed bottom-4 right-4 bg-gray-800 text-white px-3 py-2 rounded-lg shadow-lg hover:bg-gray-700 transition-colors text-sm z-50\"\r\n        title=\"Abrir painel de debug do cache\"\r\n      >\r\n        <span className=\"flex items-center gap-2\">\r\n          <span>📊</span>\r\n          {status.warning && <span className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></span>}\r\n        </span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 bg-gray-900 text-white p-4 rounded-lg shadow-2xl max-w-sm z-50\">\r\n      <div className=\"flex justify-between items-center mb-3\">\r\n        <h3 className=\"font-bold text-lg\">Cache & Storage</h3>\r\n        <button\r\n          onClick={() => setIsOpen(false)}\r\n          className=\"text-gray-400 hover:text-white\"\r\n        >\r\n          ✕\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"space-y-3 text-sm\">\r\n        {/* Storage Usage */}\r\n        <div>\r\n          <div className=\"flex justify-between mb-1\">\r\n            <span className=\"text-gray-300\">Storage:</span>\r\n            <span className=\"font-mono\">\r\n              {formatBytes(status.storageUsed)} / {formatBytes(status.storageQuota)}\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-700 rounded-full h-2 overflow-hidden\">\r\n            <div\r\n              className={`h-full transition-all ${\r\n                status.warning ? 'bg-red-500' : 'bg-blue-500'\r\n              }`}\r\n              style={{ width: `${Math.min(status.percentUsed, 100)}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"text-right text-xs text-gray-400 mt-1\">\r\n            {status.percentUsed.toFixed(1)}% usado\r\n          </div>\r\n          {status.warning && (\r\n            <div className=\"text-red-400 text-xs mt-1\">\r\n              ⚠️ Storage quase cheio!\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* React Query Queries */}\r\n        <div className=\"flex justify-between border-t border-gray-700 pt-2\">\r\n          <span className=\"text-gray-300\">Queries em cache:</span>\r\n          <span className=\"font-mono\">{status.reactQueryQueries}</span>\r\n        </div>\r\n\r\n        {/* Pending Sync */}\r\n        <div className=\"flex justify-between\">\r\n          <span className=\"text-gray-300\">Operações pendentes:</span>\r\n          <span className=\"font-mono\">\r\n            {status.pendingSync}\r\n            {status.pendingSync > 0 && (\r\n              <span className=\"ml-2 text-yellow-400\">⏳</span>\r\n            )}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"border-t border-gray-700 pt-3 space-y-2\">\r\n          <button\r\n            onClick={async () => {\r\n              if (window.cacheManager) {\r\n                const info = await window.cacheManager.checkUsage();\r\n                console.log('📊 Storage Usage:', info);\r\n              }\r\n            }}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded transition-colors\"\r\n          >\r\n            🔍 Log Status Detalhado\r\n          </button>\r\n\r\n          <button\r\n            onClick={clearCache}\r\n            disabled={isClearing}\r\n            className=\"w-full bg-red-600 hover:bg-red-700 px-3 py-2 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {isClearing ? '🧹 Limpando...' : '🧹 Limpar Cache'}\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => {\r\n              if (window.offlineSyncManager) {\r\n                window.offlineSyncManager.logQueueInfo();\r\n              }\r\n            }}\r\n            className=\"w-full bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded transition-colors\"\r\n          >\r\n            📦 Ver Fila Offline\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"text-xs text-gray-500 border-t border-gray-700 pt-2\">\r\n          💡 Dica: Use o console do navegador (F12) para mais detalhes\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}